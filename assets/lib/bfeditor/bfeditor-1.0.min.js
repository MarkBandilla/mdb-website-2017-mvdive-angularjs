!function(e){var t=function(){"undefined"!=typeof console&&i.debug===!0&&("Microsoft Internet Explorer"==navigator.appName?1==arguments.length?console.log("[BFEditor]",arguments[0]):2==arguments.length?console.log("[BFEditor]",arguments[0],arguments[1]):arguments.length>2&&console.log("[BFEditor]",arguments[0],arguments[1],arguments[2]):console.log(["BFEditor"],arguments))},n=function(e){throw new Error("[BFEditor] "+e)};e.fn.draggable||n("$.fn.draggable does not exist. Please import $.fn.draggable into your document for continue using BFEditor."),e.fn.droppable||n("$.fn.droppable does not exist. Please import $.fn.droppable into your document for continue using BFEditor."),e.fn.sortable||n("$.fn.sortable does not exist. Please import $.fn.sortable into your document for continue using BFEditor.");var i=function(t,n){this.options=e.extend({},i.DEFAULTS,n),this.init(t)};i.debug=!1,i.version="1.1.4",i.DEFAULTS={niceScrollEnabled:!0,btnMoveContainerText:'<i class="fa fa-sort"></i>',btnMoveComponentText:'<i class="fa fa-arrows"></i>',btnSettingContainerText:'<i class="fa fa-cog"></i>',btnSettingComponentText:'<i class="fa fa-cog"></i>',btnDuplicateContainerText:'<i class="fa fa-files-o"></i>',btnDuplicateComponentText:'<i class="fa fa-files-o"></i>',btnDeleteContainerText:'<i class="fa fa-times"></i>',btnDeleteComponentText:'<i class="fa fa-times"></i>',tabContainersText:"Containers",tabContainersTitle:"Containers",tabComponentsText:"Components",tabComponentsTitle:"Components",tabTooltipEnabled:!0,extraTabs:null,defaultComponentType:"blank",snippetsUrl:"snippets/default/snippets.html",snippetsListId:"bfeditor-snippets-list",snippetsTooltipEnabled:!0,snippetsTooltipPosition:"left",snippetsFilterEnabled:!0,snippetsCategoriesSeparator:";",iframeMode:!1,contentAreasSelector:null,contentAreasWrapper:'<div class="bfeditor-content-areas-wrapper container"></div>',containerSettingEnabled:!0,containerSettingInitFunction:function(e,t){},containerSettingShowFunction:function(t,n,i){var o=e(n).find(".bfeditor-container-inner"),a=e(o).prop("id"),s=e(o).prop("class").replace(/bfeditor-container-inner/g,""),r=e(o).css("height"),l=e(o).css("background-color"),c=e(o).css("background-image").replace('url("',"").replace('")',""),d=e(o).find("> div").hasClass("container"),p=e(o).find("> div").hasClass("container-fluid"),f=e(o).css("margin"),u=e(o).css("padding"),m="";m='	<div class="row">	<div class="col-xs-6">       <label><input type="checkbox" name="repeat"> Repeat</label>       <label><input type="checkbox" name="center"> Center</label>	</div>	<div class="col-xs-6">       <label><input type="checkbox" name="fixed"> Fixed</label>       <label><input type="checkbox" name="cover"> Cover</label>	</div>	</div>';var b="";b=d?'<option value="main-wraper">none</option><option selected>container</option><option>container-fluid</option>':p?'<option value="main-wraper">none</option><option>container</option><option selected>container-fluid</option>':'<option value="main-wraper" selected>none</option><option>container</option><option>container-fluid</option>',t.html('<form class="form-horizontal form-container-settings">   <legend>Property</legend>   <div class="form-group">       <label class="control-label col-xs-3">Type:</label>       <div class="col-xs-9">           <select name="type" class="form-control">'+b+'           </select>       </div>   </div>   <div class="form-group">       <label class="control-label col-xs-3">ID:</label>       <div class="col-xs-9">           <input type="text" name="id" class="form-control" value="'+a+'" />       </div>   </div>   <div class="form-group">       <label class="control-label col-xs-3">Class:</label>       <div class="col-xs-9">           <input type="text" name="class" class="form-control" value="'+s+'" />       </div>   </div>   <div class="form-group">       <label class="control-label col-xs-3">Height:</label>       <div class="col-xs-9">           <input type="text" name="height" class="form-control" value="'+r+'" />       </div>   </div>   <br>   <legend>Background</legend>   <div class="form-group">       <label class="control-label col-xs-3">Color:</label>       <div class="col-xs-9">           <input type="text" name="color" placeholder="Color" class="form-control" value="'+l+'" />       </div>   </div>   <div class="form-group">       <label class="control-label col-xs-3">Image:</label>       <div class="col-xs-9">           <button type="button" class="btn btn-lg btn-block dp-chooser" style="height: 50px; border: 1px solid #ccc; background: url('+c+') center center; background-size: cover;"></button>       </div>       <div class="col-xs-11 col-xs-offset-1">       <br>'+m+'       </div>   </div>   <br>   <legend>Spacing</legend>   <div class="form-group">       <label class="control-label col-xs-3">Margin:</label>       <div class="col-xs-9">           <input type="text" name="margin" class="form-control" value="'+f+'" />       </div>   </div>   <div class="form-group">       <label class="control-label col-xs-3">Padding:</label>       <div class="col-xs-9">           <input type="text" name="padding" class="form-control" value="'+u+'" />       </div>   </div></form>'),"no-repeat"===e(o).css("background-repeat")?t.find('[name="repeat"]').prop("checked",!1):t.find('[name="repeat"]').prop("checked",!0),"cover"===e(o).css("background-size")&&t.find('[name="cover"]').prop("checked",!0),"fixed"===e(o).css("background-attachment")&&t.find('[name="fixed"]').prop("checked",!0),"50% 50%"===e(o).css("background-position")&&t.find('[name="center"]').prop("checked",!0),t.find(".dp-chooser").on("click",function(){var t=e(this);dpChooser("image",function(n){console.log(n);var i="url('"+n+"')";e(t).css({"background-image":i});var a=e(this).closest("form").find('[name="color"]').val(),s=e(this).closest("form").find('[name="image"]').css("background-image"),r=e(this).closest("form").find('[name="repeat"]:checked').val(),l=e(this).closest("form").find('[name="center"]:checked').val(),c=e(this).closest("form").find('[name="fixed"]:checked').val(),d=e(this).closest("form").find('[name="cover"]:checked').val(),i="";a&&(i+=a+" "),(null!=s||void 0!=s||""!=s&&"none"!=s)&&(i+="url('"+s+"') "),r||(i+="no-repeat "),l&&(i+="center center "),c&&(i+="fixed "),s&&e(o).css("background",i),d&&e(o).css("background-size","cover")})}),t.find("[name]").on("change",function(t){t.preventDefault();var n=e(this).closest("form").find('[name="color"]').val(),a=e(this).closest("form").find('[name="image"]').css("background-image"),s=e(this).closest("form").find('[name="repeat"]:checked').val(),r=e(this).closest("form").find('[name="center"]:checked').val(),l=e(this).closest("form").find('[name="fixed"]:checked').val(),c=e(this).closest("form").find('[name="cover"]:checked').val();switch(e(this).attr("name")){case"id":e(o).prop("id",e(this).val());break;case"class":e(o).prop("class","bfeditor-container-inner "+e(this).val());break;case"height":e(o).css("height",e(this).val());break;case"type":e(o).find("> div").removeClass("container-fluid"),e(o).find("> div").removeClass("container"),e(o).find("> div").addClass(e(this).val());break;case"margin":e(o).css("margin",e(this).val());break;case"padding":e(o).css("padding",e(this).val());break;default:var d="";n&&(d+=n+" "),null!=a&&void 0!=a&&""!=a&&"none"!=a&&(d+="url('"+a+"') "),s||(d+="no-repeat "),r&&(d+="center center "),l&&(d+="fixed "),console.log("bg",d),e(o).css("background",d),c&&e(o).css("background-size","cover")}"function"==typeof i.options.onContentChanged&&i.options.onContentChanged.call(null,null)})},containerSettingHideFunction:null,onReady:function(){},onInitFrame:function(e,t,n){},onSidebarToggled:function(e){},onInitContentArea:function(e){},onContentChanged:function(e){},onInitContainer:function(e){},onBeforeContainerDeleted:function(e,t){},onContainerDeleted:function(e,t){},onContainerChanged:function(t,n){e.each(e(n).find("[data-force-show]"),function(){var t=e(this).data("force-show");console.log("css",t),e(this).css(t)})},onContainerDuplicated:function(e,t,n){},onContainerSelected:function(e,t){},onContainerSnippetDropped:function(e,t,n){},onComponentReady:function(e){},onInitComponent:function(e){},onBeforeComponentDeleted:function(e,t){},onComponentDeleted:function(e,t){},onComponentChanged:function(e,t){},onComponentDuplicated:function(e,t,n){},onComponentSelected:function(e,t){},onComponentSnippetDropped:function(e,t,n){},onBeforeDynamicContentLoad:function(e,t){},onDynamicContentLoaded:function(e,t,n,i){},onDynamicContentError:function(e,t,n,i){}},i.components={blank:{settingEnabled:!1}},i.log=t,i.error=n,i.prototype={init:function(n){var i=this,o=i.options;if(o.iframeMode)n=i.initFrame(n);else if(i.body=e(document.body),n.is("textarea")){t("Target is textarea",n);var a=n.val(),s=e("<div />"),r=i.generateId("wrapper");n.after(s),s.attr({id:r,"class":"bfeditor-wrapper"}),s.html(a),n.css("display","none"),n.attr("data-bfeditor-wrapper","#"+r),n=s}var l,c=i.body;c.hasClass("initialized-snippets-list")?t("Snippets list is already initialized!"):(l=i.initSidebar(),c.addClass("initialized-snippets-list")),c.hasClass("initialized-click-event-handlers")?t("CLick event handlers is already initialized!"):(i.initBFEditorClicks(),c.addClass("initialized-click-event-handlers")),i.initContentAreas(n),l||"function"!=typeof o.onReady||o.onReady.call(i)},generateId:function(e){var t=(new Date).getTime();return"bfeditor-"+e+"-"+t},initNiceScroll:function(n){t("initNiceScroll",n),e.fn.niceScroll&&this.options.niceScrollEnabled?(t("Initialize $.fn.niceScroll"),n.niceScroll({cursorcolor:"#999",cursorwidth:6,railpadding:{top:0,right:0,left:0,bottom:0},cursorborder:"",disablemutationobserver:!0})):t("$.fn.niceScroll does not exist. Use default sidebar.")},initFrame:function(n){t("initFrame",n);var o=this,a=o.options,s=n.html(),r=e("<iframe />"),l=o.generateId("frame");n.after(r),r.attr({id:l,"class":"bfeditor-frame"}),n.css("display","none"),n.attr("data-bfeditor-frame","#"+l);var c=r.contents(),d=c.find("head"),p=c.find("body");t("Adding styles to iframe...");var f="";e('[data-type="bfeditor-style"]').each(function(){var t=e(this),n=t.attr("href")||t.attr("data-href")||"";f+=n?'<link rel="stylesheet" type="text/css" href="'+n+'" />\n':'<style type="text/css">'+t.html()+"</style>\n"}),t("Styles: \n"+f),d.append(f),t("All styles are added"),t("Adding original content to iframe...");var u;return a.contentAreasWrapper?(u=e(a.contentAreasWrapper),p.append(u),u.html(s)):p.html(s),a.snippetsListId=i.DEFAULTS.snippetsListId,o.body=p,"function"==typeof a.onInitFrame&&a.onInitFrame.call(r,r,d,p),u||p},initSidebar:function(){t("initSidebar");var o=this,a=o.options,s=o.body;return s.addClass("opened-bfeditor-sidebar"),a.snippetsListId===i.DEFAULTS.snippetsListId?(t("Render default BFEditor snippet container"),s.append('<div id="bfeditor-sidebar">   <a id="bfeditor-sidebar-toggler"><i class="fa fa-chevron-right"></i></a>   <div id="bfeditor-snippets-list"></div>   <div id="bfeditor-snippets-content" style="display: none"></div>   <div id="bfeditor-setting-panel">       <div id="bfeditor-setting-header"><span id="bfeditor-setting-title"></span><a href="#" id="bfeditor-setting-closer"><i class="fa fa-arrow-right"></i></a></div>       <div id="bfeditor-setting-body"><div id="bfeditor-setting-forms"></div></div>   </div></div>'),o.initSidebarToggler()):(t('Render BFEditor snippets content after custom snippets list with id="'+a.snippetsListId+'"'),s.find("#"+a.snippetsListId).after('<div id="bfeditor-snippets-content" style="display: none"></div>')),"string"==typeof a.snippetsUrl&&a.snippetsUrl.length>0?(t('Getting snippets form "'+a.snippetsUrl+'"...'),e.ajax({type:"get",dataType:"html",url:a.snippetsUrl,success:function(e){t("Success in getting snippets",e),o.renderSnippets(e),o.initSnippets(),o.initTabs(),o.initTabsSwitcher(),o.initSettingPanel(),a.snippetsFilterEnabled&&(o.initSnippetsFilter("Container"),o.initSnippetsFilter("Component")),(a.snippetsTooltipEnabled||a.tabTooltipEnabled)&&(t("Initialize Bootstrap tooltip plugin"),s.find("#"+a.snippetsListId).find('[data-toggle="tooltip"]').tooltip()),"function"==typeof a.onReady&&a.onReady.call(o)},error:function(e){t("Error when getting snippets",e)}})):void n('"snippetsUrl" must be not null!')},initSnippetsFilter:function(n){t("initSnippetsFilter",n);var i=this,o=i.options,a=i.body,s=n.toLowerCase(),r=i["snippets"+n+"Categories"],l="";l+='<div id="bfeditor-'+s+'-snippets-filter-wrapper" class="bfeditor-snippets-filter-wrapper">',l+='     <input type="text" id="bfeditor-'+s+'-snippets-search" class="bfeditor-snippets-search" value="" placeholder="Type to search..." />',l+='     <select id="bfeditor-'+s+'-snippets-filter" class="bfeditor-snippets-filter">',l+='         <option value="" selected="selected">All</option>';for(var c=0;c<r.length;c++)l+='     <option value="'+r[c]+'">'+r[c]+"</option>";l+="     </select>",l+="</div>";var d=a.find("#bfeditor-"+s+"-snippets-tab"),p=d.find(".bfeditor-snippet");d.prepend(l),p.each(function(){var t=e(this),n=t.attr("data-categories")||"",i=n.toLowerCase();n=n.split(o.snippetsCategoriesSeparator),i=i.split(o.snippetsCategoriesSeparator),t.data("categories",n),t.data("categoriesFilter",i)});var f=d.find(".bfeditor-snippets-search"),u=d.find(".bfeditor-snippets-filter"),m=function(){var n=(u.val()||"").toLowerCase(),i=(f.val()||"").toLowerCase();t('Do filter with selected category is "'+n+'" and search text is "'+i+'"'),n||i?(t("Filtering snippets"),p.each(function(){var t=e(this),o=t.data("categoriesFilter"),a=o.join(";"),s=0;if(n&&-1===e.inArray(n,o)&&s++,i){var r=t.attr("title").toLowerCase();-1===r.indexOf(i)&&-1===a.indexOf(i)&&s++}t[0===s?"removeClass":"addClass"]("not-matched")})):(t("Show all snippets"),p.removeClass("not-matched"))};u.on("change",function(){m()});var b;f.on("keydown",function(){clearTimeout(b),b=setTimeout(function(){m()},200)})},toggleSidebar:function(e){t("toggleSidebar",e);var n=this,i=n.options,o=n.body,a=o.find("#bfeditor-sidebar-toggler i");e?(o.addClass("opened-bfeditor-sidebar"),a.attr("class","fa fa-chevron-right")):(o.removeClass("opened-bfeditor-sidebar"),a.attr("class","fa fa-chevron-left")),"function"==typeof i.onSidebarToggled&&i.onSidebarToggled.call(null,e)},initSidebarToggler:function(){t("initSidebarToggler");var e=this,n=e.body;n.find("#bfeditor-sidebar-toggler").on("click",function(t){t.preventDefault(),e.toggleSidebar(!n.hasClass("opened-bfeditor-sidebar"))})},renderSnippets:function(n){t("renderSnippets",n);var i=this,o=i.options,a=i.body,s="",r="",l="";i.snippetsContainerCategories=[],i.snippetsComponentCategories=[],e("<div />").html(n).find("> div").each(function(n){var a=e(this),c=a.html().trim(),d=a.attr("data-preview"),p=a.attr("data-type"),f=a.attr("data-bfeditor-title"),u="",m=a.attr("data-categories")||"";t("Snippet #"+n+" type="+p+" categories="+m,d,c),u+='<section class="bfeditor-snippet" data-snippet="#bfeditor-snippet-'+n+'" data-type="'+p+'" '+(o.snippetsTooltipEnabled?'data-toggle="tooltip" data-placement="'+o.snippetsTooltipPosition+'"':"")+' title="'+f+'" data-categories="'+m+'">',u+='   <img class="bfeditor-snippet-preview" src="'+d+'" />',u+="</section>",m=m.split(o.snippetsCategoriesSeparator),"container"===p?(s+=u,i.snippetsContainerCategories=i.snippetsContainerCategories.concat(m)):-1!==p.indexOf("component")&&(r+=u,i.snippetsComponentCategories=i.snippetsComponentCategories.concat(m));var b=i.getDataAttributes(a,["data-preview","data-type","data-bfeditor-title","data-categories"],!0);l+='<script id="bfeditor-snippet-'+n+'" type="text/html" '+b.join(" ")+">"+c+"</script>"}),i.snippetsContainerCategories=i.beautifyCategories(i.snippetsContainerCategories),i.snippetsComponentCategories=i.beautifyCategories(i.snippetsComponentCategories),a.find("#"+o.snippetsListId).html('<ul id="bfeditor-snippets-type-switcher" class="nav nav-tabs nav-justified">    <li class="active"><a href="#bfeditor-container-snippets-tab">'+o.tabContainersText+'</a></li>    <li><a href="#bfeditor-component-snippets-tab">'+o.tabComponentsText+'</a></li></ul><div id="bfeditor-snippets-container" class="tab-content">   <div class="tab-pane bfeditor-snippets active" id="bfeditor-container-snippets-tab"><div class="bfeditor-snippets-inner">'+s+'</div></div>   <div class="tab-pane bfeditor-snippets" id="bfeditor-component-snippets-tab"><div class="bfeditor-snippets-inner">'+r+"</div></div></div>").addClass("loaded-snippets"),a.find("#bfeditor-snippets-content").html(l)},beautifyCategories:function(n){t("beautifyCategories",n);for(var i=[],o=0;o<n.length;o++){var a=n[o]||"";""!==a&&-1===e.inArray(a,i)&&i.push(a)}return i.sort()},initSnippets:function(){t("initSnippets");var n=this,i=n.options,o=n.body,a=o.find("#"+i.snippetsListId);t("Initialize $.fn.draggable for container snippets list"),a.find(".bfeditor-snippet[data-type=container]").draggable({helper:"clone",revert:"invalid",connectToSortable:o.find(".bfeditor-content-area"),start:function(){e("[contenteditable]").blur(),e(".bfeditor-container.showed-bfeditor-toolbar").removeClass("showed-bfeditor-toolbar"),e(".bfeditor-component.showed-bfeditor-toolbar").removeClass("showed-bfeditor-toolbar")},stop:function(){a.find(".bfeditor-snippet[data-type^=component]").draggable("option","connectToSortable",o.find(".bfeditor-container-content"))}}),a.find(".bfeditor-snippet[data-type^=component]").draggable({helper:"clone",revert:"invalid",connectToSortable:o.find(".bfeditor-container-content"),start:function(){o.find("[contenteditable]").blur(),o.find(".bfeditor-container.showed-bfeditor-toolbar").removeClass("showed-bfeditor-toolbar"),o.find(".bfeditor-component.showed-bfeditor-toolbar").removeClass("showed-bfeditor-toolbar"),o.addClass("highlighted-container-content")},stop:function(){o.removeClass("highlighted-container-content")}})},initTabs:function(){t("initTabs");var n=this,i=n.body,o=n.options,a=i.find("#bfeditor-snippets-type-switcher"),s=i.find("#bfeditor-snippets-container");if(o.extraTabs&&e.isPlainObject(o.extraTabs)){t("Add extra tabs",o.extraTabs);for(var r in o.extraTabs){var l=o.extraTabs[r];a.append('<li><a href="#bfeditor-extra-tab-'+r+'"'+(o.tabTooltipEnabled?'data-toggle="tooltip" data-placement="bottom" title="'+l.title+'"':"")+">"+l.text+"</a></li>"),s.append('<div class="tab-pane bfeditor-snippets" id="bfeditor-extra-tab-'+r+'"><div class="bfeditor-snippets-inner">'+l.content+"</div></div>")}}n.initNiceScroll(s.find(".bfeditor-snippets-inner"))},initTabsSwitcher:function(){t("initTabsSwitcher");var n=this,i=n.body,o=i.find("#bfeditor-snippets-type-switcher li"),a=i.find("#bfeditor-snippets-container .tab-pane");o.find("a").on("click",function(t){t.preventDefault();var s=e(this),r=s.parent(),l=s.attr("href");if(!r.hasClass("active")){var c=o.filter(".active"),d=a.filter(".active"),p=i.find(l);if(c.removeClass("active"),d.removeClass("active"),r.addClass("active"),p.addClass("active"),e.fn.niceScroll&&n.options.niceScrollEnabled){d.getNiceScroll().hide();var f=p.getNiceScroll();f.show(),f.resize()}}})},initSettingPanel:function(){t("initSettingPanel");var i=this,o=i.options,a=i.body;a.find("#bfeditor-setting-closer").on("click",function(e){e.preventDefault(),i.hideSettingPanel()});var s=a.find("#bfeditor-setting-forms");if(i.initNiceScroll(s),o.containerSettingEnabled===!0)if("function"==typeof o.containerSettingInitFunction){var r=e('<div id="bfeditor-container-setting" class="bfeditor-setting-form clearfix"></div>');s.append(r),t("Initialize container setting panel"),o.containerSettingInitFunction.call(i,r,i)}else n('"containerSettingInitFunction" is not function!')},setSettingContainer:function(e){t("setSettingContainer",e);var n=this,i=n.body;if(e){var o=e.attr("id");i.attr("data-setting-container",o)}else i.removeAttr("data-setting-container")},getSettingContainer:function(){t("getSettingContainer");var e=this,n=e.body,i=n.attr("data-setting-container");return n.find("#"+i)},setSettingComponent:function(e){t("setSettingComponent",e);var n=this,i=n.body;if(e){var o=e.attr("id");i.attr("data-setting-component",o)}else i.removeAttr("data-setting-component")},getSettingComponent:function(){t("getSettingComponent");var e=this,n=e.body,i=n.attr("data-setting-component");return n.find("#"+i)},showSettingPanel:function(n){t("showSettingPanel",n);var o=this,a=o.options,s=o.body,r=n.is(".bfeditor-component"),l=s.find("#bfeditor-setting-forms").children(".active");if(l.removeClass("active"),r){o.setSettingComponent(n),o.setSettingContainer(null);var c=o.getComponentType(n),d=i.components[c];s.find("#bfeditor-setting-title").html(d.settingTitle);var p=s.find("#bfeditor-setting-forms"),f=s.find("#bfeditor-setting-"+c);if(0===f.length){var d=i.components[c];if("function"==typeof d.initSettingForm){f=e('<div id="bfeditor-setting-'+c+'" data-type="'+c+'" class="bfeditor-setting-form clearfix active"></div>');var u=e("<span />").html("Loading...");p.append(f),f.append(u),t('Initializing setting form for component type "'+c+'"');var m=d.initSettingForm.call(d,f,o);e.when(m).done(function(){t('Initialized setting form for component type "'+c+'"'),setTimeout(function(){u.remove(),"function"==typeof d.showSettingForm?(t('Show setting form of component type "'+c+'"'),d.showSettingForm.call(d,f,n,o)):t('"showSettingForm" function of component type "'+c+'" does not exist')},100)})}else t('"initSettingForm" function of component type "'+c+'" does not exist')}else"function"==typeof d.showSettingForm?(t('Show setting form of component type "'+c+'"'),d.showSettingForm.call(d,f,n,o)):t('"showSettingForm" function of component type "'+c+'" does not exist'),f.addClass("active")}else{o.setSettingContainer(n),o.setSettingComponent(null),s.find("#bfeditor-setting-title").html("Container Settings");var f=s.find("#bfeditor-container-setting");"function"==typeof a.containerSettingShowFunction?(t("Show setting form of container"),a.containerSettingShowFunction.call(o,f,n,o)):t('"containerSettingShowFunction" does not exist'),f.addClass("active")}o.toggleSidebar(!0),s.addClass("opened-bfeditor-setting")},hideSettingPanel:function(){t("hideSettingPanel");var e=this,n=e.options,o=e.body;o.removeClass("opened-bfeditor-setting");var a=o.find("#bfeditor-setting-forms").children(".active");if(a.length>0){if(a.is("#bfeditor-container-setting"))"function"==typeof n.containerSettingHideFunction?(t("Hide setting form of container"),n.containerSettingHideFunction.call(e,a,e)):t('"containerSettingHideFunction" does not exist');else{var s=a.attr("data-type"),r=i.components[s];"function"==typeof r.hideSettingForm?(t('Hide setting form of component type "'+s+'"'),r.hideSettingForm.call(r,a,e)):t('"hideSettingForm" function of component type "'+s+'" does not exist')}a.removeClass("active")}o.removeClass("opened-bfeditor-setting"),e.setSettingComponent(null),e.setSettingContainer(null)},getContentAreas:function(n){t("getContentAreas",n);var i,o=this,a=o.options;if(a.contentAreasSelector&&(i=n.find(a.contentAreasSelector)),!i||0===i.length){t("Do not find any content area. Creating default content area..."),i=e("<div />");var s=n.html();i.html(s),n.empty().append(i)}return i},initContentAreas:function(n){t("initContentAreas",n);var i=this,o=i.getContentAreas(n);o.each(function(){var t=e(this);t.attr("id")||t.attr("id",i.generateId("content-area")),i.initContentArea(t),t.data("bfeditor",i)})},initContentArea:function(n){t("initContentArea",n);var i=this,o=i.options,a=i.body;if(n.addClass("bfeditor-content-area"),t("Initialize $.fn.droppable for content area"),n.droppable({accept:".bfeditor-snippet[data-type=container]",tolerance:"pointer",greedy:!0}),t("Initialize $.fn.sortable for content area"),n.sortable({handle:".btn-container-reposition",items:"> section",connectWith:".bfeditor-content-area",axis:"y",tolerance:"pointer",sort:function(){e(this).removeClass("ui-state-default")},receive:function(s,r){t("On received snippet",s,r);var l=r.helper,c=r.item;if(c.is(".bfeditor-snippet")){var d=a.find(c.attr("data-snippet")).html();t("Snippet content",d);var p=e('<section class="bfeditor-container">   <section class="bfeditor-container-inner">'+d+"</section></section>");l.replaceWith(p),p.hasClass("showed-bfeditor-toolbar")||(e(".bfeditor-container.showed-bfeditor-toolbar").removeClass("showed-bfeditor-toolbar"),p.addClass("showed-bfeditor-toolbar")),"function"==typeof o.onContainerSnippetDropped&&o.onContainerSnippetDropped.call(n,s,p,r.item),i.initContainer(n,p)}i.hideSettingPanel(),"function"==typeof o.onContentChanged&&o.onContentChanged.call(n,s)}}),t("Initialize existing containers in content area"),n.children("section").each(function(){i.convertToContainer(n,e(this))}),"function"==typeof o.onInitContentArea){var s=o.onInitContentArea.call(n,n);s&&s.length>0&&e.each(s,function(){i.convertToContainer(n,e(this))})}},convertToContainer:function(e,n){t("convertToContainer",e,n);var i,o=this,a=n.is("section");a?(n.addClass("bfeditor-container-inner"),n.wrap('<section class="bfeditor-container"></section>'),i=n.parent()):(n.wrap('<section class="bfeditor-container"><section class="bfeditor-container-inner"></section></section>'),i=n.parent().parent()),o.initContainer(e,i)},initContainer:function(n,i){t("initContainer",n,i);var o=this,a=o.options;if(i.hasClass("bfeditor-initialized-container")&&i.hasClass("bfeditor-initializing-container"))t(i.hasClass("bfeditor-initialized-container")?"Container is already initialized!":"Container is initializing...");else{i.addClass("bfeditor-initializing-container");var s="";a.containerSettingEnabled===!0&&(s='<a href="#" class="btn-container-setting">'+a.btnSettingContainerText+"</a>"),t("Render BFEditor toolbar for container",i),i.append('<div class="bfeditor-toolbar bfeditor-toolbar-container">   <a href="#" class="btn-container-reposition">'+a.btnMoveContainerText+"</a>"+s+'   <a href="#" class="btn-container-duplicate">'+a.btnDuplicateContainerText+'</a>   <a href="#" class="btn-container-delete">'+a.btnDeleteContainerText+"</a></div>"),i.attr("id",o.generateId("container"));var r=i.find('[data-type="container-content"]');t("Initialize "+r.length+" container content(s)"),r.each(function(){var t=e(this);o.initContainerContent(n,i,t)}),"function"==typeof a.onInitContainer&&a.onInitContainer.call(n,i),i.addClass("bfeditor-initialized-container"),i.removeClass("bfeditor-initializing-container")}},initContainerContent:function(n,i,o){t("initContainerContent",n,i,o);var a=this,s=a.options,r=a.body;o.addClass("bfeditor-container-content"),o.attr("id",a.generateId("container-content")),t("Initialize $.fn.droppable for container content"),o.droppable({accept:".bfeditor-snippet[data-type=component]",tolerance:"pointer",greedy:!0}),t("Initialize $.fn.sortable for container content"),o.sortable({scrollSpeed:5,handle:".btn-component-reposition",items:"> section",connectWith:".bfeditor-container-content",tolerance:"pointer",forcePlaceholderSize:!0,sort:function(){e(this).removeClass("ui-state-default")},receive:function(i,o){t("On received snippet",i,o);var l,c=o.helper,d=o.item;if(d.is(".bfeditor-snippet")){var p=r.find(d.attr("data-snippet")),f=p.html(),u=d.attr("data-type");t("Snippet content",f);var m=a.getDataAttributes(p,null,!0),b=e('<section class="bfeditor-component" data-type="'+u+'" '+m.join(" ")+'>   <section class="bfeditor-component-content">'+f+"</section></section>");c.replaceWith(b),l=b.closest(".bfeditor-container"),"function"==typeof s.onComponentSnippetDropped&&s.onComponentSnippetDropped.call(n,i,b,o.item),a.initComponent(n,l,b)}else l=d.closest(".bfeditor-container");l.hasClass("showed-bfeditor-toolbar")||(e(".bfeditor-container.showed-bfeditor-toolbar").removeClass("showed-bfeditor-toolbar"),l.addClass("showed-bfeditor-toolbar")),"function"==typeof s.onContainerChanged&&s.onContainerChanged.call(n,i,l),"function"==typeof s.onContentChanged&&s.onContentChanged.call(n,i)}}),t("Initialize existing components inside container content"),o.children().each(function(){var t=e(this);a.convertToComponent(n,i,t,!0)})},convertToComponent:function(e,n,i,o){t("convertToComponent",e,n,i,o);var a,s=this,r=i.is("section");r?(i.addClass("bfeditor-component"),i.wrapInner('<section class="bfeditor-component-content"></section>'),a=i):(i.wrap('<section class="bfeditor-component"><section class="bfeditor-component-content"></section></section>'),a=i.parent().parent()),o&&a.addClass("existing-component"),s.initComponent(e,n,a)},getDataAttributes:function(n,i,o){t("getDataAttributes",n,i,o);var a=o?[]:{};return i||(i=[]),e.each(n.get(0).attributes,function(t,n){0===n.name.indexOf("data-")&&-1===e.inArray(n.name,i)&&(o?a.push(n.name+'="'+n.value+'"'):a[n.name]=n.value)}),a},getComponentType:function(e){t("getComponentType",e);var o=this,a=o.options,s=e.attr("data-type"),r=s?s.replace("component-",""):"";return r&&r in i.components?r:(t(r?'Component type "'+r+'" does not exist':"This component does not contain data-type attribute"),"string"==typeof a.defaultComponentType?r=a.defaultComponentType:"function"==typeof a.defaultComponentType&&(r=a.defaultComponentType.call(e,e)),r||n("Component type is undefined!"),t("Fallback to defaultComponentType: "+r),r)},initComponent:function(n,o,a){t("initComponent",n,o,a);var s=this,r=s.options,l=s.body;if(a.hasClass("bfeditor-initialized-component")&&a.hasClass("bfeditor-initializing-component"))t(a.hasClass("bfeditor-initialized-component")?"Component is already initialized!":"Component is initializing...");else{a.addClass("bfeditor-initializing-component"),a.attr("id",s.generateId("component"));var c=a.children(".bfeditor-component-content");c.attr("id",s.generateId("component-content"));var d=s.getComponentType(a);t("Component type: "+d),componentOptions="","text"==d&&(componentOptions='   <a href="#" class="btn-component pull-left ctrl-select hide" title="Bold"><i class="fa fa-bold"></i></a>   <a href="#" class="btn-component pull-left ctrl-select hide" title="Italic"><i class="fa fa-italic"></i></a>   <a href="#" class="btn-component pull-left ctrl-select hide" title="Underline"><i class="fa fa-underline"></i></a>   <a href="#" class="btn-component pull-left ctrl-select hide" title="Strikethrough"><i class="fa fa-strikethrough"></i></a>   <a href="#" class="btn-component pull-left ctrl-select hide" title="Superscript"><i class="fa fa-superscript"></i></a>   <a href="#" class="btn-component pull-left ctrl-select hide" title="Subscript"><i class="fa fa-subscript"></i></a>   <span class="pull-left">|</span>   <a href="#" class="btn-component pull-left ctrl-both hide" title="Heading"><i class="fa fa-header"></i></a>   <a href="#" class="btn-component pull-left ctrl-both hide" title="Color"><i class="fa fa-paint-brush"></i></a>   <span class="pull-left">|</span>   <a href="#" class="btn-component pull-left ctrl-both hide" title="Clear"><i class="fa fa-eraser"></i></a>   <span class="pull-left">|</span>   <a href="#" class="btn-component pull-left ctrl-click hide" title="Left"><i class="fa fa-align-left"></i></a>   <a href="#" class="btn-component pull-left ctrl-click hide" title="Justify"><i class="fa fa-align-justify"></i></a>   <a href="#" class="btn-component pull-left ctrl-click hide" title="Center"><i class="fa fa-align-center"></i></a>   <a href="#" class="btn-component pull-left ctrl-click hide" title="Right"><i class="fa fa-align-right"></i></a>   <span class="pull-left">|</span>   <a href="#" class="btn-component pull-left ctrl-select hide" title="Link"><i class="fa fa-link"></i></a>   <a href="#" class="btn-component pull-left ctrl-select hide" title="Unlink"><i class="fa fa-unlink"></i></a>   <span class="pull-left">|</span>   <a href="#" class="btn-component pull-left ctrl-click hide" title="OL"><i class="fa fa-list-ol"></i></a>   <a href="#" class="btn-component pull-left ctrl-click hide" title="UL"><i class="fa fa-list-ul"></i></a>   <a href="#" class="btn-component pull-left ctrl-click hide" title="Table"><i class="fa fa-table"></i></a>   <span class="pull-left">|</span>   <a href="#" class="btn-component pull-left ctrl-click hide" title="Paragraph"><i class="fa fa-paragraph"></i></a>   <a href="#" class="btn-component pull-left ctrl-click hide" title="Button"><i class="fa fa-hand-pointer-o"></i></a>   <a href="#" class="btn-component pull-left ctrl-click hide" title="Icon"><i class="fa fa-smile-o"></i></a>   <a href="#" class="btn-component pull-left ctrl-click hide" title="Image"><i class="fa fa-image"></i></a>   <span class="pull-left">|</span>   <a href="#" class="btn-component pull-left" title="Undo"><i class="fa fa-undo"></i></a>   <a href="#" class="btn-component pull-left" title="Redo"><i class="fa fa-repeat"></i></a>   <span class="pull-left">|</span>');
var p=i.components[d],f=p.settingEnabled,u="";f&&(u='<a href="#" class="btn-component-setting">'+r.btnSettingComponentText+"</a>"),t("Render BFEditor toolbar for component",a),a.append('<div class="bfeditor-toolbar bfeditor-toolbar-component">'+componentOptions+u+'   <a href="#" class="btn-component-reposition" title="Move">'+r.btnMoveComponentText+'</a>   <a href="#" class="btn-component-duplicate" title="Duplicate">'+r.btnDuplicateComponentText+'</a>   <a href="#" class="btn-component-delete" title="Delete">'+r.btnDeleteComponentText+"</a></div>");var m=[];a.find("[data-dynamic-href]").each(function(){var t=e(this);m.push(s.initDynamicContent(t))}),e.when.apply(null,m).then(function(){"function"==typeof p.init?p.init.call(p,n,o,a,s):(l.removeClass("highlighted-container-content"),t('"init" function of component type "'+d+'" does not exist')),"function"==typeof r.onInitComponent&&r.onInitComponent.call(n,a),a.addClass("bfeditor-initialized-component"),a.removeClass("bfeditor-initializing-component")})}},getClickedElement:function(t,n){var i=e(t.target),o=i.closest(n);return i.is(n)?i:o.length>0?o:null},initBFEditorClicks:function(){t("initBFEditorClicks");var n=this,i=n.options,o=n.body;o.on("blur","[contenteditable]",function(e){"function"==typeof i.onContentChanged&&i.onContentChanged.call(null,e)}),o.on("blur",function(t){t.preventDefault(),e(".ctrl-both").addClass("hide"),e(".ctrl-select").addClass("hide"),e(".ctrl-click").addClass("hide")}),o.on("click",function(a){var s=document.getSelection().toString(),r=s.length;e(".ctrl-both").removeClass("hide"),r?(e(".ctrl-select").removeClass("hide"),e(".ctrl-click").addClass("hide")):(e(".ctrl-select").addClass("hide"),e(".ctrl-click").removeClass("hide"));var l=n.getClickedElement(a,"#bfeditor-sidebar"),c=n.getClickedElement(a,".bfeditor-container");if(c&&(t("Click on .bfeditor-container",c),!c.hasClass("showed-bfeditor-toolbar"))){o.find(".bfeditor-container.showed-bfeditor-toolbar").removeClass("showed-bfeditor-toolbar"),o.find(".bfeditor-component.showed-bfeditor-toolbar").removeClass("showed-bfeditor-toolbar"),c.addClass("showed-bfeditor-toolbar");var d=c.parent();"function"==typeof i.onContainerSelected&&i.onContainerSelected.call(d,a,c),o.hasClass("opened-bfeditor-setting")}var p=n.getClickedElement(a,".bfeditor-component");if(p){if(t("Click on .bfeditor-component",p),!p.hasClass("showed-bfeditor-toolbar")){o.find(".bfeditor-component.showed-bfeditor-toolbar").removeClass("showed-bfeditor-toolbar"),p.addClass("showed-bfeditor-toolbar");var d=p.parent();"function"==typeof i.onComponentSelected&&i.onComponentSelected.call(d,a,p)}}else l||o.find(".bfeditor-component.showed-bfeditor-toolbar").removeClass("showed-bfeditor-toolbar")}),o.delegate(".bfeditor-content-area .simple-text img","click",function(t){var n=e(this);dpChooser("image",function(t){t&&(width="100%",imageClass="img-rounded",e(n).attr("src",t),e(n).css({width:width}),e(n).attr("class",imageClass))})}),o.on("click",".btn-container-setting",function(i){i.preventDefault();var a=e(this);t("Click on .btn-container-setting",a);var s=a.closest(".bfeditor-container");o.hasClass("opened-bfeditor-setting")&&o.hasClass("opened-bfeditor-sidebar")&&s.is(n.getSettingContainer())?n.hideSettingPanel():n.showSettingPanel(s)}),o.on("click",".btn-container-duplicate",function(a){a.preventDefault();var s=e(this);t("Click on .btn-container-duplicate",s);var r=s.closest(".bfeditor-container"),l=r.parent(),c=e(n.getContainerContent(r));r.after(c),n.convertToContainer(l,c);var d=o.find("#"+i.snippetsListId),p=d.find(".bfeditor-snippet[data-type^=component]"),f=p.draggable("option","connectToSortable");p.draggable("option","connectToSortable",f.add(c.find(".bfeditor-container-content"))),t("Container is duplicated"),"function"==typeof i.onContainerDuplicated&&i.onContainerDuplicated.call(l,r,c),"function"==typeof i.onContentChanged&&i.onContentChanged.call(l,a)}),o.on("click",".btn-container-delete",function(a){a.preventDefault();var s=e(this);if(t("Click on .btn-container-delete",s),confirm("Are you sure that you want to delete this container? This action can not be undo!")){var r=s.closest(".bfeditor-container"),l=r.find(".bfeditor-component"),c=r.parent();"function"==typeof i.onBeforeContainerDeleted&&i.onBeforeContainerDeleted.call(c,a,r);var d=n.getSettingComponent();if(d){var p=d.closest(".bfeditor-container");p.is(r)&&(t("Deleting container is container of setting container. Close setting panel for this setting component",d),n.hideSettingPanel())}else n.getSettingContainer().is(r)&&(t("Deleting container is setting container. Close setting panel for this container",r),n.hideSettingPanel());l.length>0&&l.each(function(){n.deleteComponent(e(this))}),r.remove(),o.removeClass("opened-bfeditor-setting"),"function"==typeof i.onContainerDeleted&&i.onContainerDeleted.call(c,a,r),"function"==typeof i.onContentChanged&&i.onContentChanged.call(c,a)}}),o.on("click",".btn-component-setting",function(i){i.preventDefault();var a=e(this);t("Click on .btn-component-setting",a);var s=a.closest(".bfeditor-component");o.hasClass("opened-bfeditor-setting")&&o.hasClass("opened-bfeditor-sidebar")&&s.is(n.getSettingComponent())?n.hideSettingPanel():n.showSettingPanel(s)}),o.on("click",".btn-component-duplicate",function(o){o.preventDefault();var a=e(this);t("Click on .btn-component-duplicate",a);var s=a.closest(".bfeditor-component"),r=s.closest(".bfeditor-container"),l=r.parent(),c=e(n.getComponentContent(s));s.after(c),n.convertToComponent(l,r,c),t("Component is duplicated"),"function"==typeof i.onComponentDuplicated&&i.onComponentDuplicated.call(l,s,c),"function"==typeof i.onContainerChanged&&i.onContainerChanged.call(l,o,r),"function"==typeof i.onContentChanged&&i.onContentChanged.call(l,o)}),o.on("click",".btn-component-delete",function(o){o.preventDefault();var a=e(this);if(t("Click on .btn-component-delete",a),confirm("Are you sure that you want to delete this component? This action can not be undo!")){var s=a.closest(".bfeditor-component"),r=s.closest(".bfeditor-content-area");"function"==typeof i.onBeforeComponentDeleted&&i.onBeforeComponentDeleted.call(r,o,s),n.getSettingComponent().is(s)&&n.hideSettingPanel(),n.deleteComponent(s),"function"==typeof i.onComponentDeleted&&i.onComponentDeleted.call(r,o,s),"function"==typeof i.onContainerChanged&&i.onContainerChanged.call(r,o,s),"function"==typeof i.onContentChanged&&i.onContentChanged.call(r,o)}}),o.on("click",".btn-component",function(t){t.preventDefault();var n=e(this).attr("title").toLowerCase(),i=document.getSelection().getRangeAt(0).commonAncestorContainer.parentNode,o=(document.getSelection().getRangeAt(0).commonAncestorContainer.parentNode.tagName,document.getSelection().toString()),a=o.length;switch(n){case"color":var s="text-muted";s=prompt("Please enter Color",s);var r="";if(r="text-muted"===s||"text-primary"===s||"text-info"===s||"text-success"===s||"text-warning"===s||"text-danger"===s||"text-black"===s||"text-white"===s?'<span class="'+s+'">'+o+"</span>":'<span style="color:'+s+';">'+o+"</span>",s)if(a){if(document.selection){var l=document.selection.createRange();l.pasteHTML(r)}else if(document.getSelection){var l=document.getSelection().getRangeAt(0),c=document.createElement("span");l.surroundContents(c),"text-muted"===s||"text-primary"===s||"text-info"===s||"text-success"===s||"text-warning"===s||"text-danger"===s||"text-black"===s||"text-white"===s?e(c).removeClass("text-muted").removeClass("text-primary").removeClass("text-info").removeClass("text-success").removeClass("text-warning").removeClass("text-danger").removeClass("text-black").removeClass("text-white").addClass(s).css({color:null}):e(c).css({color:s})}}else"text-muted"===s||"text-primary"===s||"text-info"===s||"text-success"===s||"text-warning"===s||"text-danger"===s||"text-black"===s||"text-white"===s?e(i).removeClass("text-muted").removeClass("text-primary").removeClass("text-info").removeClass("text-success").removeClass("text-warning").removeClass("text-danger").removeClass("text-black").removeClass("text-white").addClass(s).css({color:null}):e(i).css({color:s});break;case"heading":var d="H1";d=prompt("Please enter Heading",d);var r="<"+d+">"+o+"</"+d+">";d&&(a?document.execCommand("insertHtml",!1,r):e(i).replaceWith("<"+d+">"+e(i).html()+"</"+d+">"));break;case"left":document.execCommand("justifyLeft",!1,null);break;case"justify":document.execCommand("justifyFull",!1,null);break;case"center":document.execCommand("justifyCenter",!1,null);break;case"right":document.execCommand("justifyRight",!1,null);break;case"clear":document.execCommand("removeFormat",!1,null);break;case"link":var p="http://www.website.com";p=prompt("Please enter URL",p),p&&document.execCommand("createLink",!1,p);break;case"ol":document.execCommand("insertOrderedList",!1,null);break;case"ul":document.execCommand("insertUnorderedList",!1,null);break;case"table":var f=prompt("Please enter Row#",2),u=prompt("Please enter Col#",3),m="";if(f&&u)for(var b=0;b<parseInt(f);b++){m+="<tr>";for(var g=0;g<parseInt(u);g++)m+="<td></td>";m+="</tr>"}var r='<table class="table table-bordered table-hover">'+m+"</table>";document.execCommand("insertHTML",!1,r);break;case"paragraph":var h=["Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc mollis maximus arcu eget maximus. Aliquam erat volutpat. Quisque et ipsum augue. Pellentesque lobortis, libero quis bibendum blandit, dui erat egestas tellus, vitae pellentesque mauris turpis eget neque. Quisque sit amet ornare justo, ac pretium purus. Cras porttitor lorem quis massa congue finibus. Morbi sagittis dapibus leo, consequat maximus purus viverra sit amet. Ut gravida molestie nulla ac convallis. Nulla eget condimentum lorem. Donec sit amet vehicula leo, id tristique augue. Sed vehicula odio nibh, nec consequat elit lobortis eget.","Aenean nulla ante, tincidunt vitae leo eget, luctus aliquet nulla. Curabitur maximus, sem eu vestibulum dapibus, ex augue dictum ex, at consectetur est erat quis urna. Curabitur a sodales magna, et interdum nisl. Ut sit amet mauris egestas, maximus dolor fermentum, elementum est. Morbi ac sollicitudin lectus. Curabitur ac egestas ex. Curabitur at neque ante. Cras et tincidunt est. Suspendisse non elementum urna. Proin justo odio, sodales eget ipsum sed, egestas dictum turpis. Aenean eu dignissim massa, ac sagittis sapien. Sed sollicitudin volutpat elementum. Mauris ut semper lorem.","Duis id porta lacus. Nam ultrices consectetur neque, ac venenatis enim varius sed. Proin at porta sem. Pellentesque congue pretium efficitur. Phasellus neque nisi, luctus at justo quis, fermentum ultrices orci. Aliquam erat volutpat. Sed dignissim et tortor dictum blandit.","Sed vitae ornare nisl. Mauris pulvinar auctor eros, quis ultrices quam scelerisque ac. Maecenas vitae ex convallis, molestie urna a, pretium odio. Morbi in nibh sit amet velit finibus cursus a eget lectus. Suspendisse potenti. Donec in pretium augue. Vestibulum scelerisque accumsan venenatis.","Pellentesque lorem leo, tempor at massa a, hendrerit venenatis neque. Vivamus porttitor finibus dui ut suscipit. In id justo fringilla massa maximus lacinia. Nullam sit amet lectus magna. Integer tincidunt libero at orci vehicula iaculis. Vivamus porta orci est, nec gravida lorem laoreet a. Fusce laoreet mauris ac ex faucibus, id pretium velit tincidunt. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae;","Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.","Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit."],v=prompt("Please enter Paragraph",h[Math.floor(Math.random()*h.length)]),r="<p>"+v+"</p>";v&&document.execCommand("insertHtml",!1,v);break;case"button":var C=prompt("Please enter Type","button"),y=prompt("Please enter Class","btn btn-primary btn-lg"),x=prompt("Please enter Icon","fa fa-plus"),S=prompt("Please enter Text","Add"),k=prompt("Please enter Link","http://www.website.com"),w=prompt("Please enter ClickEvent","return false;");if(C){var r='<button type="'+C+'" href="'+k+'" onclick="'+w+'" class="'+y+'"><i class="'+x+'"></i> &nbsp;'+S+"</button>";document.execCommand("insertHtml",!1,r)}break;case"icon":var x="fa fa-smile-o";if(x=prompt("Please enter Icon",x)){var r='<span class="'+x+'"></span>';if(document.selection){var l=document.selection.createRange();l.pasteHTML(r)}else if(document.getSelection){var l=document.getSelection().getRangeAt(0),c=document.createElement("span");l.surroundContents(c),e(c).addClass(x)}}break;case"image":dpChooser("image",function(t){var n="100%",i="img-rounded";if(t){var o='<img src="'+t+'" width="'+n+'" class="'+i+'" />';if(document.selection){var a=document.selection.createRange();a.pasteHTML(o)}else if(document.getSelection){var a=document.getSelection().getRangeAt(0),s=document.createElement("img");a.surroundContents(s),e(s).prop("src",t),n&&e(s).css({width:n}),i&&e(s).attr("class",i)}}});break;default:document.execCommand(n,!1,null)}})},deleteComponent:function(e){t("deleteComponent",e);var n=this,o=n.getComponentType(e),a=i.components[o];"function"==typeof a.destroy?a.destroy.call(a,e,n):t('"destroy" function of component type "'+o+'" does not exist'),e.remove()},initDynamicContent:function(n){t("initDynamicContent",n);var i=this,o=i.options,a=n.closest(".bfeditor-component"),s=n.closest(".bfeditor-content-area");n.attr("id")||n.attr("id",i.generateId("dynamic-element")),"function"==typeof o.onBeforeDynamicContentLoad&&o.onBeforeDynamicContentLoad.call(s,n,a);var r=n.attr("data-dynamic-href"),l=i.getDataAttributes(a,["data-type","data-dynamic-href"],!1);return l=e.param(l),t("Dynamic href: "+r,"Data: "+l),e.ajax({url:r,data:l,type:"GET",dataType:"HTML",success:function(e,i,a){t("Dynamic content is loaded",n,e,i,a),n.html(e),"function"==typeof o.onDynamicContentLoaded&&o.onDynamicContentLoaded.call(s,n,e,i,a)},error:function(e,i,a){t("Error when loading dynamic content",n,e,i,a),"function"==typeof o.onDynamicContentError&&o.onDynamicContentError.call(s,n,e,i,a)}})},getComponentContent:function(n){t("getComponentContent",n);var o,a=this,s=a.getComponentType(n),r=i.components[s],l=a.getDataAttributes(n,null,!0);if("function"==typeof r.getContent)o=r.getContent.call(r,n,a);else{t('"getContent" function of component type "'+s+'" does not exist. Using default getContent method');var c=n.children(".bfeditor-component-content");o=c.html()}var d=e("<div />").html(o);return d.find("[data-dynamic-href]").each(function(){e(this).html("")}),o=d.html(),"<section "+l.join(" ")+">"+o+"</section>"},getContainerContent:function(n){t("getContainerContent",n);var i=this,o=(i.options,n.children(".bfeditor-container-inner").clone()),a=o.attr("id"),s=o.attr("style");return o.find('[class*="col"]').each(function(){var t=e(this);t.removeClass("bfeditor-container-content ui-droppable ui-sortable").removeAttr("id"),t.children(".bfeditor-component").each(function(){var t=e(this);t.replaceWith(i.getComponentContent(t))})}),a=a?'id="'+a+'"':"",s=s?"style='"+s+"'":"","<section "+a+" "+s+">"+o.html()+"</section>"}};var o={__init:function(n){return e(this).each(function(){var a=e(this);a.data("bfeditor")&&(t("BFEditor will re-initialized!"),o.destroy()),t("Initialze BFEditor",a,n);var s=new i(a,n);a.data("bfeditor",s)})},destroy:function(){var t=e(this),n=e("body");t.empty(),e.removeData(t,"bfeditor"),n.removeClass("opened-bfeditor-sidebar"),n.removeClass("initialized-snippets-list"),e("#bfeditor-sidebar").remove()},getContent:function(t){var n=e(this),i=n.data("bfeditor"),o=i.options,a=[];return n=o.iframeMode?i.body:n,n.find(".bfeditor-content-area").each(function(){var t="";e(this).children(".bfeditor-container").each(function(){var n=e(this);t+=i.getContainerContent(n,o)}),a.push(t)}),t?a:a.join("\n")},getOptions:function(){var t=e(this).data("bfeditor");return t.options}};e.bfeditor=i,e.fn.bfeditor=function(e){return o[e]&&"init"!==e?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void n("Method "+e+" does not exist on $.fn.bfeditor"):o.__init.apply(this,arguments)}}(jQuery);